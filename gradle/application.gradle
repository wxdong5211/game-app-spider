apply plugin:'application'

//applicationDefaultJvmArgs = ["-Dgreeting.language=en"]

jar {
    exclude "**/*.xml","**/*.properties"
}

startScripts{
    classpath += files('conf')
    doLast {
        def windowsScriptFile = file getWindowsScript()
        def unixScriptFile    = file getUnixScript()
        windowsScriptFile.text = windowsScriptFile.text.replace('%APP_HOME%\\lib\\conf', '%APP_HOME%\\conf')
        unixScriptFile.text    = unixScriptFile.text.replace('$APP_HOME/lib/conf', '$APP_HOME/conf')
        if(unixScriptFile.text.indexOf("export APP_HOME")==-1){
            unixScriptFile.text    = unixScriptFile.text.replace('APP_HOME=',  'export APP_HOME=')
        }
    }
}

applicationDistribution.from(sourceSets.main.resources) {
    into "conf"
}